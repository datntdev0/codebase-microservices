# Microservice Boilerplate Detailed Requirements

### 1. Setup foundation codebase

#### 1.1. Scaffold the project skeleton

- [x] Scaffold .NET Aspire Orchestrator
- [x] Scaffold core microservices (Identity, Admin)
- [x] Scaffold frontend apps (Angular SPA) 
- [x] Scaffold DbMigrator and YARP API Gateway.
- [x] Organize and refactor for frontend, backend, shared modules, devops.

#### 1.2. Setup infrastructure for DevOps

- [ ] Setup Grafana Cloud for monitoring and alerting.
- [x] Backend: Add xUnit projects for Integration Tests.
- [x] Frontend: Add Cypress for Angular for End-to-end Tests.
- [x] Setup CI for build, test, lint, code quality scan.
- [x] Setup CI for quality scan with SonarQube.
- [ ] Update README with project overview and setup instructions.

### 2. Implement Fundamental Authentication

#### 2.1. Setup Identity Microservice 

- [ ] Research apply schema-per-tenant or partitioning.
- [ ] Implement Srv.Identity with OpenIddict for OAuth2/OIDC flows.
- [ ] Build sign in and sign up UI with Blazor Server.
- [ ] Integrate Srv.Identity with Angular frontend.

#### 2.2. Implement Multi-Tenancy Management

- [ ] Implement Admin Layout and basic management UI.
- [ ] Implement tenant management UI and CRUD APIs.
- [ ] Implement tenant registration and onboarding flow.

### 4. Implement Fundamental Authorization

- [ ] CRUD APIs and UI for users, connect to Srv.Identity.
- [ ] Define and assign roles, support custom roles per tenant.
- [ ] Enforce role/permission checks and implement middleware.

### 5. Implement System Configuration

- [ ] Support multiple themes, allow tenant-specific theme selection.
- [ ] Build feature flag service and admin UI, support per-tenant flags.

### 6. Implement System Notification

- [ ] UI for notification inbox, integrate SignalR for realtime updates.
- [ ] Integrate SMTP/Twilio/SendGrid, handle notification events.

### 7. Implement Edition and Subscription

- [ ] CRUD APIs and UI for plans, link features to editions.
- [ ] Integrate Stripe/PayPal SDKs and manage subscription lifecycle.

### 8. Implement Advanced Features

- [ ] Add Azure AD, Google, etc. support to Srv.Identity.
- [ ] Enable admin/user impersonation with audit logging.
- [ ] Extend i18n support for frontend/backend.
- [ ] Use SignalR for chat, backend service for persistence.
- [ ] Add SMS provider integration, enable notification triggers.
